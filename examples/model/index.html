<!doctype html>
<html lang="en">
<head>
    <title>ko.ninja - Model</title>
    <link rel="stylesheet" type="text/css" href="http://knockoutjs.com/css/styles.css" />
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
</head>
<body id="wrapper">

    <br /><br />

    <a href="/">&lt; back</a>

    <br /><br />
    <h3>Model Example</h3>

    <script src="http://codeorigin.jquery.com/jquery-2.0.3.min.js"></script>
    <script data-main="../../ko.ninja.js" src="http://requirejs.org/docs/release/2.1.9/minified/require.js"></script>
    <script src="../../ko.ninja.requireConfig.js"></script>
    <script>

require(['ko.ninja.mockapi', 'ko.ninja'], function (mock_api, ko) {

	ko.baseApiUrl = '/api';

	var Channel, Page, Document;

	Channel = ko.Model.extend({
		'model': 'channels',
		'idAttribute': 'id',
		'attributes': {
			'type': {
				'type': 'string',
				'in': ['standard', 'email', 'twitter']
			}
		},
		'collections': {
			'pages': {
				'model': Page
			}
		},
		'initialize': function() {
			console.log('Channel initialized.', this.id(), this.pages.models());
		}
	});

	Page = ko.Model.extend({
		'model': 'pages',
		'idAttribute': 'id',
		'attributes': {
			'index': {
				'type': 'integer',
				'required': true
			}
		}
	});

	Document = ko.Model.extend({
		'model': 'documents',
		'idAttribute': 'id',
		'attributes': {
			'name': {
				'type': 'string',
				'required': true
			}
		},
		'collections': {
			'channels': {
				'model': Channel
			}
		},
		'initialize': function() {
		}
	});

	var Documents = ko.Collection.extend({
		'model': Document,
		'url': '/documents'
	});

	var docs = new Documents();
	docs.create({
		'name': 'Test'
	}).done(function(doc) {
		console.log('done', doc);
	});

});

    </script>

</body>
</html>
